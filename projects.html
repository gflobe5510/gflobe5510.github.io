<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projects · Garth Lo Bello</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;margin:0;background:#0b0f14;color:#eaf2ff;line-height:1.6}
    header{background:#121821;padding:1rem 2rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.1)}
    header h1{margin:0;font-size:1.8rem}
    nav a{margin:0 .75rem;color:#5ea1ff;text-decoration:none}
    nav a:hover{text-decoration:underline}
    main{max-width:1000px;margin:2rem auto;padding:0 1rem}
    section{background:#121821;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 6px 18px rgba(0,0,0,.3)}
    h2{margin-top:0;color:#5ea1ff}
    .grid{display:grid;gap:1rem;grid-template-columns:repeat(3,1fr)}
    @media (max-width: 960px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width: 640px){.grid{grid-template-columns:1fr}}
    .card{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1rem;display:flex;flex-direction:column}
    .badge{display:inline-block;font-size:.75rem;background:rgba(94,161,255,.12);border:1px solid rgba(94,161,255,.35);color:#eaf2ff;padding:.15rem .5rem;border-radius:999px;margin-right:.25rem}
    .btn{display:inline-block;padding:.5rem .875rem;border-radius:10px;border:1px solid rgba(255,255,255,.2);text-decoration:none;color:#eaf2ff}
    .btn + .btn{margin-left:.5rem}
    .muted{color:#9bb0c9}
    .row{margin-top:auto}
  </style>
</head>
<body>
  <header>
    <h1>Garth Lo Bello · Data Analytics</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="projects.html">Projects</a>
      <a href="about.html">About</a>
      <a href="mailto:garthlobello@gmail.com">Contact</a>
    </nav>
  </header>

  <main>
    <section>
      <h2>Featured & Recent Projects</h2>
      <p class="muted">This list auto-updates from my GitHub. Featured projects appear first, then the most recently updated public repos.</p>
      <div id="projects" class="grid" role="list"></div>
      <p class="muted">Tip: add a project website in the repo’s <code>Settings → Pages</code> or set the repo’s <code>Website</code> field; it will show up as “Live Demo”.</p>
    </section>
  </main>

  <script>
    // ---------- CONFIGURE THIS ----------
    const GITHUB_USER = "gflobe5510";

    // Put repo names here (exactly) to pin them at the top in this order.
    // Edit to your real repo names:
    const FEATURED_REPOS = [
      "portfolio-tracker-pro",
      "utility-sector-revenue-optimization",
      "luxury-housing-insights"
    ];
    // ---------- END CONFIG ----------

    const container = document.getElementById("projects");

    // Utility: format dates nicely
    const fmtDate = (iso) => new Date(iso).toLocaleDateString(undefined, {year:"numeric", month:"short", day:"numeric"});

    // Render one project card
    function renderCard(repo) {
      const lang = repo.language ? `<span class="badge">${repo.language}</span>` : "";
      const topics = (repo.topics || []).slice(0,4).map(t => `<span class="badge">${t}</span>`).join(" ");
      const desc = repo.description ? repo.description : "No description provided yet.";
      const demo = repo.homepage ? `<a class="btn" href="${repo.homepage}" target="_blank" rel="noopener">Live Demo</a>` : "";
      const updated = fmtDate(repo.pushed_at);

      const div = document.createElement("div");
      div.className = "card";
      div.setAttribute("role", "listitem");
      div.innerHTML = `
        <h3>${repo.name.replace(/-/g," ")}</h3>
        <p>${desc}</p>
        <p>${lang} ${topics}</p>
        <div class="row">
          <a class="btn" href="${repo.html_url}" target="_blank" rel="noopener">GitHub</a>
          ${demo}
          <span class="muted" style="margin-left:.75rem">Updated ${updated}</span>
        </div>
      `;
      return div;
    }

    async function loadProjects() {
      // Get up to 100 public repos, already sorted by updated desc
      const resp = await fetch(`https://api.github.com/users/${GITHUB_USER}/repos?per_page=100&sort=updated`);
      if (!resp.ok) {
        container.innerHTML = `<p class="muted">Could not load repositories (${resp.status}).</p>`;
        return;
      }
      const all = await resp.json();

      // Attach topics for richer badges (optional, best-effort)
      // GitHub REST v3 can return topics if we request a special Accept header; not available here via fetch in all cases, so we'll skip extra call.

      // Make a map for quick lookup
      const byName = Object.fromEntries(all.map(r => [r.name.toLowerCase(), r]));

      // Build featured list in the order specified, only if present
      const featured = FEATURED_REPOS
        .map(n => byName[n.toLowerCase()])
        .filter(Boolean);

      // Everything else, excluding featured, already sorted by updated time
      const rest = all.filter(r => !FEATURED_REPOS.map(x => x.toLowerCase()).includes(r.name.toLowerCase()));

      // Final list = featured first, then the next most recent (limit for brevity)
      const finalList = [...featured, ...rest].slice(0, 12);

      if (finalList.length === 0) {
        container.innerHTML = `<p class="muted">No public repositories found. Once you push projects to GitHub, they’ll appear here automatically.</p>`;
        return;
      }

      finalList.forEach(repo => container.appendChild(renderCard(repo)));
    }

    loadProjects().catch(() => {
      container.innerHTML = `<p class="muted">Something went wrong loading projects.</p>`;
    });
  </script>
</body>
</html>
